"use strict";(()=>{var e={};e.id=821,e.ids=[821],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35900:e=>{e.exports=require("pg")},6021:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>E,originalPathname:()=>h,patchFetch:()=>j,requestAsyncStorage:()=>d,routeModule:()=>i,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>R});var o={};r.r(o),r.d(o,{DELETE:()=>n});var s=r(95419),a=r(69108),u=r(99678),p=r(7727);async function n(e){try{let t=e.nextUrl.searchParams.get("id_project")||"",r=await p.Z.query("UPDATE projects SET products = $1 WHERE id = $2 RETURNING *;",[null,t]);if(1===r.rowCount){let e=r.rows[0];return Response.json({success:!0,data:e},{status:200})}throw Error("La requ\xeate DELETE a \xe9chou\xe9")}catch(e){return console.error("Erreur lors de la suppression de tous les produits du projet:",e),Response.json({success:!1,error:e},{status:500})}}let i=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/project/delete/route",pathname:"/api/project/delete",filename:"route",bundlePath:"app/api/project/delete/route"},resolvedPagePath:"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\api\\project\\delete\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:c,headerHooks:E,staticGenerationBailout:R}=i,h="/api/project/delete/route";function j(){return(0,u.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:l})}},7727:(e,t,r)=>{r.d(t,{Z:()=>a});let{Pool:o}=r(35900),s=new o({host:"localhost",user:"postgres",password:"root",database:"Moduloop"});s.query(`
    CREATE TRIGGER update_projects_modtime
    BEFORE UPDATE ON projects
    FOR EACH ROW
    EXECUTE PROCEDURE update_modified_column();
`,(e,t)=>{e&&console.error(e)});let a=s},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638],()=>r(6021));module.exports=o})();