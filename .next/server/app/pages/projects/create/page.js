(()=>{var e={};e.id=172,e.ids=[172],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},71310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>g,tree:()=>c});var a=r(50482),o=r(69108),s=r(62563),n=r.n(s),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["pages",{children:["projects",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,47128)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\projects\\create\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9295)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\projects\\create\\page.tsx"],d="/pages/projects/create/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/pages/projects/create/page",pathname:"/pages/projects/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},20380:(e,t,r)=>{Promise.resolve().then(r.bind(r,95281))},41827:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Title:()=>i});var a=r(95344),o=r(89410),s=r(8428),n=r(3729);let i=e=>{let[t,r]=(0,n.useState)(e.number||""),[i,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(""),[d,p]=(0,n.useState)(!1),g=(0,s.useRouter)();d||"/pages/projects"!==e.back||(u("/api/project"),p(!0)),(0,n.useEffect)(()=>{void 0!==e.number?r(e.number||""):null===e.number&&r("")},[e.number]);let m=async()=>{try{let r=`${c}?id=${e.id_project}&name=${t}`;if(!(await fetch(r,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");l(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},x=()=>{r(e.number||""),l(!1)};return(0,a.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[a.jsx("div",{className:"cursor-pointer",onClick:()=>{g.back()},children:a.jsx(o.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),a.jsx("h1",{className:"page-title",children:e.title}),e.canChange&&(0,a.jsxs)("div",{className:"flex gap-5",children:[i?a.jsx("input",{onChange:e=>{r(e.target.value)},type:"text",className:"title-input",value:t}):a.jsx("p",{className:"page-number",children:t}),i?(0,a.jsxs)("div",{className:"flex",children:[a.jsx(o.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>m()}),a.jsx(o.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>x()})]}):a.jsx(o.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>l(!i)})]}),!e.canChange&&a.jsx("p",{className:"page-number",children:e.number})]})}},95281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(95344),o=r(41827),s=r(31601),n=r(3729);let i=function(){let[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[p,g]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/session",{method:"GET"}),r=await e.json();r.success?await t(r.session.user.id):console.error("Failed to fetch user:",r.error)})()},[]),(0,n.useEffect)(()=>{(async()=>{if(e){let t=await fetch(`/api/group/list?id=${encodeURIComponent(e)}`,{method:"GET"}),r=await t.json();r.success?i((0,s.yR)(r.data)):console.error("Failed to fetch groups:",r.error)}})()},[e]);let[m,x]=(0,n.useState)(!1),h=async()=>{try{let t=document.getElementById("name-createProject"),r=document.getElementById("group-createProject");if(t.value){if(t.value.length<=4||t.value.length>=49){alert("Le nom du projet doit contenir entre 5 et 50 caract\xe8res.");return}}else{alert("Veuillez renseigner le nom du projet.");return}if(console.log("nameProject",t.value),console.log("groupId",r.value),"-10"===r.value)console.log("Ne pas reli\xe9 \xe0 un groupe");else{console.log("Reli\xe9 \xe0 un groupe");let a=new FormData;if(a.append("user_id",e),a.append("name",t.value),a.append("description",""),a.append("company",""),a.append("location",""),a.append("area",""),a.append("budget",""),a.append("group",r.value),m){let e=document.getElementById("group-NewGroup");a.append("group-name",e.value),a.append("group-description",""),a.append("group-budget","")}(await fetch("/api/project",{method:"POST",body:a})).ok?window.location.href="/pages/projects":alert("Failed to create project.")}}catch(e){console.error("Failed to create project:",e)}finally{}};return(0,a.jsxs)("div",{children:[a.jsx(o.Title,{title:"Votre nouveau projet",image:"/icons/close.svg",number:"",back:"/pages/projects",canChange:!1}),(0,a.jsxs)("div",{className:"mt-[3%] flex flex-col gap-5 px-8 py-4 bg-white items-center justify-center w-[50%] rounded-[16px] ml-auto mr-auto",children:[(0,a.jsxs)("div",{className:"w-[100%]",children:[a.jsx("label",{htmlFor:"name-createProject",className:"block mb-2 text-sm font-bold text-gray-900",children:"Nom"}),a.jsx("input",{style:{width:"100%"},id:"name-createProject",type:"text",placeholder:"Quel est le nom de votre projet ?",className:"text-left bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 "})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-[100%]",children:[(0,a.jsxs)("div",{className:"w-[100%]",children:[a.jsx("label",{htmlFor:"group-createProject",className:"block mb-2 text-sm font-bold text-gray-900",children:"Voulez-vous reli\xe9 ce projet \xe0 un groupe ?"}),(0,a.jsxs)("select",{onChange:e=>{x("-2"===e.target.value)},id:"group-createProject",className:"bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",children:[a.jsx("option",{className:"",value:-1,children:"Aucun Groupe"}),Array.isArray(r)&&r.map(e=>a.jsx("option",{value:e.id||-10,children:e.name},e.id)),a.jsx("option",{value:"-2",children:"Cr\xe9er un nouveau groupe"})]})]}),m&&(0,a.jsxs)("div",{className:" flex flex-col gap-1",children:[a.jsx("label",{hidden:!0,htmlFor:"group-NewGroup",className:"form-label",children:"Nom du Groupe"}),a.jsx("input",{style:{width:"100%"},id:"group-NewGroup",type:"text",placeholder:"Quel est le nom de votre nouveau groupe ?",className:"text-left bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 "})]})]}),a.jsx("div",{onClick:h,className:"py-2 px-4 border-2 border-[#30C1BD] rounded-[8px] bg-primary-transparent cursor-pointer transition-all duration-250 hover:opacity-50",children:a.jsx("p",{className:"text-lg font-bold text-[#30C1BD]",children:"Cr\xe9er"})})]})]})}},31601:(e,t,r)=>{"use strict";function a(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,user_id:e[a].user_id};t.push(r)}return t[0]}function o(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,user_id:e[a].user_id};t.push(r)}return t}function s(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,products:e[a].products,company:e[a].company,location:e[a].location,area:e[a].area,user_id:e[a].user_id,group:e[a].group_id,created_at:e[a].created_at,updated_at:e[a].updated_at};t.push(r)}return t}function n(e){return{id:e.id,name:e.name,description:e.description,image:e.image,budget:e.budget,products:e.products,company:e.company,location:e.location,area:e.area,user_id:e.user_id,group:e.group_id,created_at:e.created_at,updated_at:e.updated_at,groupInfo:null}}r.d(t,{Db:()=>a,O:()=>s,Sy:()=>n,yR:()=>o})},47128:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>o,default:()=>n});let a=(0,r(86843).createProxy)(String.raw`C:\Users\trist\Moduloop\Moduloop-TristanHourtoulle\app\pages\projects\create\page.tsx`),{__esModule:o,$$typeof:s}=a,n=a.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,973,397,302],()=>r(71310));module.exports=a})();