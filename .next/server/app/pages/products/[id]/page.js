(()=>{var e={};e.id=123,e.ids=[123],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},33610:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d});var l=t(50482),a=t(69108),r=t(62563),n=t.n(r),i=t(68300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["pages",{children:["products",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,42441)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\products\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9295)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\products\\[id]\\page.tsx"],u="/pages/products/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/pages/products/[id]/page",pathname:"/pages/products/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40113:(e,s,t)=>{Promise.resolve().then(t.bind(t,81173))},12909:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var l=t(95344);t(3729);var a=t(89410);let r=()=>l.jsx("div",{className:"flex items-center justify-center my-auto",children:l.jsx(a.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},41827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Title:()=>i});var l=t(95344),a=t(89410),r=t(8428),n=t(3729);let i=e=>{let[s,t]=(0,n.useState)(e.number||""),[i,c]=(0,n.useState)(!1),[d,o]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),x=(0,r.useRouter)();u||"/pages/projects"!==e.back||(o("/api/project"),m(!0)),(0,n.useEffect)(()=>{void 0!==e.number?t(e.number||""):null===e.number&&t("")},[e.number]);let h=async()=>{try{let t=`${d}?id=${e.id_project}&name=${s}`;if(!(await fetch(t,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");c(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},p=()=>{t(e.number||""),c(!1)};return(0,l.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[l.jsx("div",{className:"cursor-pointer",onClick:()=>{x.back()},children:l.jsx(a.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),l.jsx("h1",{className:"page-title",children:e.title}),e.canChange&&(0,l.jsxs)("div",{className:"flex gap-5",children:[i?l.jsx("input",{onChange:e=>{t(e.target.value)},type:"text",className:"title-input",value:s}):l.jsx("p",{className:"page-number",children:s}),i?(0,l.jsxs)("div",{className:"flex",children:[l.jsx(a.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>h()}),l.jsx(a.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>p()})]}):l.jsx(a.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>c(!i)})]}),!e.canChange&&l.jsx("p",{className:"page-number",children:e.number})]})}},81173:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var l=t(95344),a=t(12909),r=t(41827),n=t(3729);let i=({product:e,type:s})=>(0,l.jsxs)("table",{className:"table",children:[l.jsx("thead",{children:(0,l.jsxs)("tr",{children:[l.jsx("th",{})," ",["Fabrication","Transport et Installation","Utilisation","Fin de vie"].map((e,s)=>l.jsx("th",{className:"cell index-color index-line",children:e},s))]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"cell index-color index-col",children:"R\xe9chauffement Climatique"}),"new"===s?(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.new.rc.manufacturing}),l.jsx("td",{className:"cell",children:e.new.rc.installation}),l.jsx("td",{className:"cell",children:e.new.rc.usage}),l.jsx("td",{className:"cell",children:e.new.rc.endOfLife})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.reuse.rc.manufacturing}),l.jsx("td",{className:"cell",children:e.reuse.rc.installation}),l.jsx("td",{className:"cell",children:e.reuse.rc.usage}),l.jsx("td",{className:"cell",children:e.reuse.rc.endOfLife})]})]},e.id),(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"cell index-color index-col",children:"Epuisement des ressources fossiles"}),"new"===s?(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.new.erf.manufacturing}),l.jsx("td",{className:"cell",children:e.new.erf.installation}),l.jsx("td",{className:"cell",children:e.new.erf.usage}),l.jsx("td",{className:"cell",children:e.new.erf.endOfLife})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.reuse.erf.manufacturing}),l.jsx("td",{className:"cell",children:e.reuse.erf.installation}),l.jsx("td",{className:"cell",children:e.reuse.erf.usage}),l.jsx("td",{className:"cell",children:e.reuse.erf.endOfLife})]})]},e.id),(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"cell index-color index-col",children:"Acidifications des sols et eaux"}),"new"===s?(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.new.ase.manufacturing}),l.jsx("td",{className:"cell",children:e.new.ase.installation}),l.jsx("td",{className:"cell",children:e.new.ase.usage}),l.jsx("td",{className:"cell",children:e.new.ase.endOfLife})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.reuse.ase.manufacturing}),l.jsx("td",{className:"cell",children:e.reuse.ase.installation}),l.jsx("td",{className:"cell",children:e.reuse.ase.usage}),l.jsx("td",{className:"cell",children:e.reuse.ase.endOfLife})]})]},e.id),(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"cell index-color index-col",children:"Eutrophisation marine"}),"new"===s?(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.new.em.manufacturing}),l.jsx("td",{className:"cell",children:e.new.em.installation}),l.jsx("td",{className:"cell",children:e.new.em.usage}),l.jsx("td",{className:"cell",children:e.new.em.endOfLife})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("td",{className:"cell",children:e.reuse.em.manufacturing}),l.jsx("td",{className:"cell",children:e.reuse.em.installation}),l.jsx("td",{className:"cell",children:e.reuse.em.usage}),l.jsx("td",{className:"cell",children:e.reuse.em.endOfLife})]})]},e.id)]})]}),c=e=>l.jsx("div",{children:(0,l.jsxs)("table",{children:[l.jsx("thead",{children:(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"cell index-line index-color",children:"Nom"}),l.jsx("th",{className:"cell index-line index-color",children:"Unit\xe9"}),l.jsx("th",{className:"cell index-line index-color",children:"Base"})]})}),l.jsx("tbody",{children:(0,l.jsxs)("tr",{children:[l.jsx("td",{className:"cell",children:e.name}),l.jsx("td",{className:"cell",children:e.unit}),l.jsx("td",{className:"cell",children:e.base})]})})]})});var d=t(89410);function o({params:{id:e}}){let[s,t]=(0,n.useState)(!0),[o,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(null),[h,p]=(0,n.useState)("new"),[j,g]=(0,n.useState)(null),[f,N]=(0,n.useState)(!0),v=async s=>{s.preventDefault();try{t(!0);let s=new FormData;if(s.append("file",j),s.append("productId",o?.id),(await fetch("/api/upload/image/product",{method:"POST",body:s})).ok){let s=await fetch(`/api/product?id=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){let e=await s.json();u(e.product)}}else alert("Failed to upload image.")}catch(e){alert(e)}finally{t(!1)}};return(0,n.useEffect)(()=>{(async()=>{N(!0);try{let s=await fetch(`/api/product?id=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){let e=await s.json();if(u(e.product),e.product){let s={title:"Votre produit: ",image:"/icons/close.svg",number:e.product.name,back:"/pages/products",canChange:!1};x(s)}}}catch(e){alert(e)}finally{N(!1)}})()},[e]),l.jsx("div",{className:"",children:f?l.jsx("div",{children:l.jsx(a.Z,{})}):o?(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex items-center mb-10",children:[l.jsx("div",{className:"mr-auto",children:l.jsx(r.Title,{...m})}),l.jsx("button",{type:"button",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 download-button ",children:[l.jsx(d.default,{src:"/icons/telecharger.svg",alt:"download",height:30,width:30}),l.jsx("p",{children:"T\xe9l\xe9charger"})]})})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center mr-auto",children:[""!=o.image&&o.image?l.jsx(d.default,{src:o.image??"",alt:o.name??"",width:450,height:450,className:"object-contain"}):l.jsx(d.default,{src:"/icons/no-image.png",alt:"",width:450,height:450,className:"object-contain"}),(0,l.jsxs)("form",{onSubmit:v,children:[l.jsx("input",{type:"file",name:"file",onChange:e=>g(e.target.files?.[0])}),l.jsx("input",{type:"hidden",name:"productId",value:e}),l.jsx("input",{type:"submit",value:"Changer",className:"open-button"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-10 mr-20",children:[l.jsx(c,{...o}),(0,l.jsxs)("div",{className:"flex items-center gap-10",children:[l.jsx("button",{className:"new"===h?"inter-nav-bar":"inter-nav-bar-selected",onClick:()=>p("new"),children:"Neuf"}),l.jsx("button",{className:"reuse"===h?"inter-nav-bar":"inter-nav-bar-selected",onClick:()=>p("reuse"),children:"Reuse"})]}),l.jsx(i,{product:o,type:h})]})]})]}):l.jsx("div",{children:l.jsx("p",{children:"Produit introuvable"})})})}},42441:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>a,default:()=>n});let l=(0,t(86843).createProxy)(String.raw`C:\Users\trist\Moduloop\Moduloop-TristanHourtoulle\app\pages\products\[id]\page.tsx`),{__esModule:a,$$typeof:r}=l,n=l.default}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),l=s.X(0,[638,973,397,302],()=>t(33610));module.exports=l})();