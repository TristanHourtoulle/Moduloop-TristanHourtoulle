(()=>{var e={};e.id=449,e.ids=[449],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},22742:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(50482),a=s(69108),i=s(62563),l=s.n(i),o=s(68300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["pages",{children:["users",{children:["[userId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,62226)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\users\\[userId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9295)),"C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\trist\\Moduloop\\Moduloop-TristanHourtoulle\\app\\pages\\users\\[userId]\\page.tsx"],u="/pages/users/[userId]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/pages/users/[userId]/page",pathname:"/pages/users/[userId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},72196:(e,t,s)=>{Promise.resolve().then(s.bind(s,66018))},12909:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(95344);s(3729);var a=s(89410);let i=()=>r.jsx("div",{className:"flex items-center justify-center my-auto",children:r.jsx(a.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},41827:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Title:()=>o});var r=s(95344),a=s(89410),i=s(8428),l=s(3729);let o=e=>{let[t,s]=(0,l.useState)(e.number||""),[o,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),p=(0,i.useRouter)();u||"/pages/projects"!==e.back||(c("/api/project"),m(!0)),(0,l.useEffect)(()=>{void 0!==e.number?s(e.number||""):null===e.number&&s("")},[e.number]);let x=async()=>{try{let s=`${d}?id=${e.id_project}&name=${t}`;if(!(await fetch(s,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");n(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},g=()=>{s(e.number||""),n(!1)};return(0,r.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[r.jsx("div",{className:"cursor-pointer",onClick:()=>{p.back()},children:r.jsx(a.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),r.jsx("h1",{className:"page-title",children:e.title}),e.canChange&&(0,r.jsxs)("div",{className:"flex gap-5",children:[o?r.jsx("input",{onChange:e=>{s(e.target.value)},type:"text",className:"title-input",value:t}):r.jsx("p",{className:"page-number",children:t}),o?(0,r.jsxs)("div",{className:"flex",children:[r.jsx(a.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>x()}),r.jsx(a.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>g()})]}):r.jsx(a.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>n(!o)})]}),!e.canChange&&r.jsx("p",{className:"page-number",children:e.number})]})}},66018:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(95344),a=s(12909),i=s(41827),l=s(92706),o=s(69224);/**
 * @license lucide-react v0.337.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,o.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),d=(0,o.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),c=(0,o.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,o.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var m=s(56506),p=s(3729),x=s(34755);function g({params:{userId:e}}){let[t,s]=(0,p.useState)(null),[o,g]=(0,p.useState)(null),[h,f]=(0,p.useState)(null),[j,y]=(0,p.useState)(!1),[v,N]=(0,p.useState)("infos"),[b,w]=(0,p.useState)(!1),[k,C]=(0,p.useState)("auto"),[E,M]=(0,p.useState)(null),[_,q]=(0,p.useState)(!1),[P,S]=(0,p.useState)("user"),[T,A]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let t=async()=>{y(!0);try{let t=await fetch(`/api/project/list?id=${e}`,{method:"GET"}),s=await t.json();s.success?M(s.data):console.error("Erreur lors de la r\xe9cup\xe9ration des projets de l'utilisateur:",s.error)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des projets de l'utilisateur:",e)}finally{y(!1)}},r=async()=>{y(!0);try{let t=await fetch(`/api/user/admin?id=${encodeURIComponent(e)}`,{method:"GET"}),r=await t.json();r.success?(s(r.data),S(r.data.role),f({title:"Utilisateur",image:"/icons/close.svg",number:r.data.name+" "+r.data.firstName||"",back:"/pages/users",canChange:!1,id_project:void 0})):console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",r.error)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e)}finally{y(!1)}};(async()=>{let e=await (0,l.Gg)();if(e&&!e.user.name.includes("undefined")&&"admin"===e.user.role){g(e),await r(),await t();return}window.location.href="/"})()},[]);let I=e=>new Date(e).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),$=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/864e5),a=Math.floor(s%864e5/36e5),i=Math.floor(s%36e5/6e4);return r>0?r+" jours":a>0?a+" heures":i>0?i+" minutes":Math.floor(s%6e4/1e3)+" secondes"},L=async e=>{try{await navigator.clipboard.writeText(e),w(!0),C("auto"),setTimeout(()=>{w(!1)},2e3)}catch(e){console.error("Erreur lors de la copie dans le presse-papiers : ",e)}};if(j||!t||!h||!E)return r.jsx(a.Z,{});let R=async e=>{t&&e!==t.role?A(!0):T&&A(!1)},U=async()=>{if(t&&T){alert("Je dois modifier le r\xf4le de l'utilisateur dans la base de donn\xe9es...");let e={...t,role:P,updatedAt:"",createdAt:""};try{let t=await fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();s.success?(alert("Le r\xf4le de l'utilisateur a \xe9t\xe9 modifi\xe9 avec succ\xe8s !"),A(!1),x.toast.success("Le r\xf4le de l'utilisateur a \xe9t\xe9 modifi\xe9 avec succ\xe8s !")):(console.error("Erreur lors de la modification du r\xf4le de l'utilisateur:",s.error),x.toast.error("Erreur 1 lors de la modification du r\xf4le de l'utilisateur"))}catch(e){console.error("Erreur lors de la modification du r\xf4le de l'utilisateur:",e),x.toast.error("Erreur 2 lors de la modification du r\xf4le de l'utilisateur")}}};return(0,r.jsxs)("div",{className:"",children:[r.jsx(i.Title,{...h}),r.jsx("div",{className:"py-[3%] px-7 flex flex-col items-center",children:"infos"===v&&(0,r.jsxs)("div",{className:"flex flex-col w-[75%]",children:[r.jsx("div",{className:"px-4 sm:px-0",children:r.jsx("h3",{className:"text-2xl align-left font-semibold leading-7 text-gray-900",children:"Informations"})}),r.jsx("div",{className:"mt-6 border-t border-gray-300",children:(0,r.jsxs)("dl",{className:"divide-y divide-gray-300",children:[(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"R\xf4le"}),r.jsx("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,r.jsxs)("select",{onChange:()=>{let e=document.getElementById("role");S(e.value),R(e.value)},id:"role",className:"bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-[50%] p-2.5 ",children:[r.jsx("option",{value:"admin",selected:"admin"===t.role,children:"Administrateur"}),r.jsx("option",{value:"user",selected:"admin"!==t.role,children:"Utilisateur"})]}),r.jsx("div",{hidden:!T,onClick:U,className:"cursor-pointer border-2 border-[#30C1BD] bg-white text-[#30C1BD] rounded-md px-4 py-2 hover:bg-[#30C1BD] hover:text-white transition-all ease-in-out delay-50",children:"Confirmer"})]})})]}),(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Nom & Pr\xe9nom"}),r.jsx("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:t.name+" "+t.firstName})]}),(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Adresse Mail"}),(0,r.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0 transition-all duration-100 ease-in-out overflow-hidden hover:opacity-75",style:{height:k},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{L(t.email||"")},children:[t.email||"",r.jsx(n,{className:"transition-rotate duration-300 rotate-0 hover:rotate-[8deg]"})]}),b&&r.jsx("p",{className:"mt-2 text-sm font-semibold text-[#30c1bd]",children:"Texte copi\xe9 avec succ\xe8s !"})]})]}),(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Membre depuis"}),(0,r.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:[I(t.updatedAt||"")," ",(0,r.jsxs)("span",{className:"text-gray-500",children:["(",$(t.updatedAt||""),")"]})]})]}),(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Derni\xe8res Activit\xe9s"}),(0,r.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:[E&&E[0]?I(E[0].updated_at||""):"N\xe9ant"," ",(0,r.jsxs)("span",{className:"text-gray-500",children:["(",E&&E[0]?$(E[0].updated_at||""):"N\xe9ant",")"]})]})]}),(0,r.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[r.jsx("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Projets"}),(0,r.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",onClick:()=>{q(!_)},children:[(0,r.jsxs)(m.default,{href:"#",className:"flex items-center gap-4 w-fit bg-white text-[#30c1bd] border-2 border-[#30c1bd] rounded-md px-4 py-2 hover:bg-[#30c1bd] hover:text-white transition-all ease-in-out delay-50",children:[_?r.jsx(d,{}):r.jsx(c,{}),_?r.jsx("span",{children:"Masquer les projets"}):r.jsx("span",{children:"Voir les projets"})]}),r.jsx("div",{className:"flex flex-col items-start w-[250%] mt-5",children:_&&E.length>0?E.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-12 border-t-2 py-4 border-gray-300",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[r.jsx("p",{className:"text-lg font-semibold",children:e.name}),(0,r.jsxs)("p",{className:"text-lg",children:["Derni\xe8re modification:"," ",I(e.updated_at||"")," ",r.jsx("span",{children:$(e.updated_at||"")})]})]}),r.jsx("div",{className:"flex flex-col items-center bg-white border-2 border-black px-4 py-2 rounded-[8px]",children:(0,r.jsxs)(m.default,{href:`/pages/projects/${e.id}`,className:"flex items-center justify-center gap-3 w-fit",children:[r.jsx(u,{}),r.jsx("p",{className:"text-lg font-semibold",children:"Ouvrir"})]})})]}))||r.jsx("div",{className:"mt-",children:"Il n'y a pas de projets"}):_?r.jsx("p",{children:"L'utilisateur n'a pas encore cr\xe9\xe9 de projets..."}):null})]})]})]})})]})})]})}},69224:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(3729),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.337.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,...u},m)=>(0,r.createElement)("svg",{ref:m,...a,width:l,height:l,stroke:s,strokeWidth:n?24*Number(o)/Number(l):o,className:["lucide",`lucide-${i(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s}},62226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,s(86843).createProxy)(String.raw`C:\Users\trist\Moduloop\Moduloop-TristanHourtoulle\app\pages\users\[userId]\page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,973,397,302],()=>s(22742));module.exports=r})();