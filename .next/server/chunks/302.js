exports.id=302,exports.ids=[302],exports.modules={73199:(e,s,t)=>{let n={"36bc73ad38d694c579e3598bd450a2a6029f558c":()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.getSession),"78b55bdabf88dcd5be651d7a1d785fc3ec43e204":()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.decrypt),"7d54574caa5baa2b96b25e4c0991e44adb146ad5":()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.login),a089af096e473eb392bf8f455b8df460c2759fc8:()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.updateSession),b17d8f6613e66b3cb3357cbd972b101329bd0326:()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.logout),edc9d95c9d80edb936c64090b673fa63c7fdb0c3:()=>Promise.resolve().then(t.bind(t,75145)).then(e=>e.encrypt)};async function a(e,...s){return(await n[e]()).apply(null,s)}e.exports={"36bc73ad38d694c579e3598bd450a2a6029f558c":a.bind(null,"36bc73ad38d694c579e3598bd450a2a6029f558c"),"78b55bdabf88dcd5be651d7a1d785fc3ec43e204":a.bind(null,"78b55bdabf88dcd5be651d7a1d785fc3ec43e204"),"7d54574caa5baa2b96b25e4c0991e44adb146ad5":a.bind(null,"7d54574caa5baa2b96b25e4c0991e44adb146ad5"),a089af096e473eb392bf8f455b8df460c2759fc8:a.bind(null,"a089af096e473eb392bf8f455b8df460c2759fc8"),b17d8f6613e66b3cb3357cbd972b101329bd0326:a.bind(null,"b17d8f6613e66b3cb3357cbd972b101329bd0326"),edc9d95c9d80edb936c64090b673fa63c7fdb0c3:a.bind(null,"edc9d95c9d80edb936c64090b673fa63c7fdb0c3")}},3497:(e,s,t)=>{Promise.resolve().then(t.bind(t,96562)),Promise.resolve().then(t.bind(t,34755))},24194:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,45672,23)),Promise.resolve().then(t.t.bind(t,43982,23))},96562:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var n=t(95344),a=t(56506),c=t(8428),r=t(3729),i=t(34755);let l=()=>n.jsx("div",{className:"bg-[#30c1bd] flex items-center justify-center px-7 py-3 rounded-[8px] transition-all hover:opacity-50 cursor-pointer",children:n.jsx(a.default,{href:"/pages/login",children:n.jsx("p",{className:"text-lg font-medium text-white",children:"Se connecter"})})});var d=t(89410);let o=()=>n.jsx(a.default,{href:"/",className:"flex gap-2 flex-center nav-logo",children:n.jsx(d.default,{src:"/icons/logo.png",alt:"Moduloop Logo",width:150,height:150,className:"object-contain"})}),b=()=>n.jsx("div",{className:"flex items-center justify-center bg-white border-2 border-[#30c1bd] rounded-[8px] px-7 py-3 transition-all hover:opacity-50 cursor-pointer",children:n.jsx(a.default,{href:"/pages/register",children:n.jsx("p",{className:"text-[#30c1bd] text-lg",children:"S'inscrire"})})});var u=t(22875),f=t(83254),h=t(92706);let p=()=>{let e=(0,c.usePathname)(),[s,t]=(0,r.useState)("/"),[d,p]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[v,y]=(0,r.useState)(e),w=()=>{p(!d)},N=async()=>{try{await (0,h.kS)()}catch(e){console.error("Error logging out:",e),i.toast.error("Erreur lors de la d\xe9connexion")}finally{i.toast.success("D\xe9connexion r\xe9ussie"),window.location.href="/"}};return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/session",{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();m(s.session)}catch(e){console.error("Error fetching session:",e)}})(),v.includes("projects")?t("/pages/projects"):v.includes("products")?t("/pages/products"):v.includes("users")?t("/pages/users"):t("/")},[]),(0,r.useEffect)(()=>{x&&x.user&&"admin"===x.user.role?j(!0):j(!1)},[x]),x?(0,n.jsxs)("div",{className:"flex items-center justify-between h-24 w-full px-7 py-2",children:[n.jsx(o,{}),n.jsx("div",{className:"hidden sm:flex",children:(0,n.jsxs)("div",{className:"flex items-center gap-7",children:[n.jsx(a.default,{href:"/",onClick:()=>{t("/")},className:`nav-link ${"/"===s?"nav-link-selected":"link-to-scale"}`,children:"Accueil"}),x&&x.user&&n.jsx(a.default,{href:"/pages/projects",onClick:()=>{t("/pages/projects")},className:`nav-link ${"/pages/projects"===s?"nav-link-selected":"link-to-scale"}`,children:"Projets"}),g&&n.jsx(a.default,{href:"/pages/products",onClick:()=>{t("/pages/products")},className:`nav-link ${"/pages/products"===s?"nav-link-selected":"link-to-scale"}`,children:"Produits"}),g&&n.jsx(a.default,{href:"/pages/users",onClick:()=>{t("/pages/users")},className:`nav-link ${"/pages/users"===s?"nav-link-selected":"link-to-scale"}`,children:"Utilisateurs"}),n.jsx(a.default,{href:"https://www.moduloop.com/contact/",onClick:e=>{e.preventDefault();let s=window.open("https://www.moduloop.com/contact/","_blank");s&&(s.opener=null),window.location.href="/"},children:n.jsx("p",{className:"nav-link",children:"Contact"})}),n.jsx(a.default,{href:"",onClick:()=>{N()},className:`nav-link ${"/pages/users"===s?"nav-link-selected":"link-to-scale"}`,children:"D\xe9connexion"})]})}),n.jsx("div",{className:"flex grow items-center justify-end sm:hidden mr-3",children:(0,n.jsxs)("button",{className:"inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400   hover:bg-gray-100 hover/text-gray-500 focus:outline-none focus:ring-inset focus:ring-indigo-500",onClick:w,children:[n.jsx("span",{className:"sr-only",children:"Ouvrir le menu"}),n.jsx(u.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d&&n.jsx("div",{className:"absolute inset-x-0 top-0 transform p-2 transition md:hidden rounded-xl mobile-menu",children:n.jsx("div",{className:"rounder-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 divide-y-2 divide-gray-50 mobile-menu",children:(0,n.jsxs)("div",{className:"px-5 pt-5 pb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[n.jsx(o,{}),n.jsx("div",{className:"-mr-2",children:(0,n.jsxs)("button",{className:"inline-flex items-center justify-center rounded-md bg-white p-2   text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset   focus:ring-indigo-500",onClick:w,children:[n.jsx("span",{className:"sr-only",children:"Fermer"}),n.jsx(f.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),n.jsx("div",{className:"mt-6 ml-3",children:(0,n.jsxs)("nav",{className:"grid gap-y-8",children:[n.jsx(a.default,{href:"/",className:"",children:n.jsx("p",{className:"text",children:"Accueil"})}),n.jsx(a.default,{href:"/pages/projects",className:"",children:n.jsx("p",{className:"text",children:"Projets"})}),g&&n.jsx(a.default,{href:"/pages/products",className:"",children:"Produits"}),g&&n.jsx(a.default,{href:"/pages/users",className:"",children:"Utilisateurs"}),n.jsx(a.default,{href:"https://www.moduloop.com/contact/",onClick:e=>{e.preventDefault();let s=window.open("https://www.moduloop.com/contact/","_blank");s&&(s.opener=null),window.location.href="/"},children:n.jsx("p",{className:"",children:"Contact"})})]})}),(0,n.jsxs)("div",{className:"mt-6 flex items-center gap-5 justify-center",children:[n.jsx(b,{}),n.jsx(l,{})]})]})})})]}):(0,n.jsxs)("div",{className:"flex items-center justify-between h-24 w-full px-7 py-2",children:[n.jsx(o,{}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx(b,{}),n.jsx(l,{})]})]})}},92706:(e,s,t)=>{"use strict";t.d(s,{Gg:()=>c,kS:()=>a}),t(13664);var n=t(28371);(0,n.$)("a089af096e473eb392bf8f455b8df460c2759fc8"),(0,n.$)("edc9d95c9d80edb936c64090b673fa63c7fdb0c3"),(0,n.$)("78b55bdabf88dcd5be651d7a1d785fc3ec43e204"),(0,n.$)("7d54574caa5baa2b96b25e4c0991e44adb146ad5");var a=(0,n.$)("b17d8f6613e66b3cb3357cbd972b101329bd0326"),c=(0,n.$)("36bc73ad38d694c579e3598bd450a2a6029f558c")},9295:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>d});var n=t(25036);let a=(0,t(86843).createProxy)(String.raw`C:\Users\trist\Moduloop\Moduloop-TristanHourtoulle\app\components\Header.tsx`),{__esModule:c,$$typeof:r}=a,i=a.default;t(90413);var l=t(27171);let d={title:"Moduloop - Outil",description:"Calculer l'impact environnemental de votre projet de construction avec Moduloop"};function o({children:e}){return(0,n.jsxs)("html",{lang:"fr",children:[n.jsx("head",{children:n.jsx("link",{rel:"icon",href:"/icons/logoImage.svg"})}),(0,n.jsxs)("body",{children:[n.jsx("div",{className:"mb-10",style:{display:"flex",justifyContent:"center",width:"100%"},children:n.jsx(i,{})}),n.jsx(l.x,{richColors:!0,position:"top-center",expand:!1}),e]})]})}},75145:(e,s,t)=>{"use strict";t.r(s),t.d(s,{decrypt:()=>o,encrypt:()=>d,getSession:()=>f,login:()=>b,logout:()=>u,updateSession:()=>h});var n=t(98601);t(75811);var a=t(91471),c=t(77949),r=t(14238),i=t(17824);let l=new TextEncoder().encode("secret");async function d(e){return await new a.SignJWT(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7 days from now").sign(l)}async function o(e){let{payload:s}=await (0,a.jwtVerify)(e,l,{algorithms:["HS256"]});return s}async function b(e){let s=new Date(Date.now()+6048e5),t=await d({user:e,expires:s});(0,c.cookies)().set("session",t,{expires:s,httpOnly:!0})}async function u(){(0,c.cookies)().set("session","",{expires:new Date(0)})}async function f(){let e=c.cookies().get("session")?.value;if(!e)return null;try{let s=await o(e),{expires:t}=s;if(new Date(t)<new Date)return await u(),null;return s}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration de la session:",e),null}}async function h(e){let s=e.cookies.get("session")?.value;if(!s)return;let t=await o(s);t.expires=new Date(Date.now()+6048e5);let n=r.default.next();return n.cookies.set({name:"session",value:await d(t),httpOnly:!0,expires:t.expires}),n}(0,i.ensureServerEntryExports)([d,o,b,u,f,h]),(0,n.createActionProxy)("edc9d95c9d80edb936c64090b673fa63c7fdb0c3",d),(0,n.createActionProxy)("78b55bdabf88dcd5be651d7a1d785fc3ec43e204",o),(0,n.createActionProxy)("7d54574caa5baa2b96b25e4c0991e44adb146ad5",b),(0,n.createActionProxy)("b17d8f6613e66b3cb3357cbd972b101329bd0326",u),(0,n.createActionProxy)("36bc73ad38d694c579e3598bd450a2a6029f558c",f),(0,n.createActionProxy)("a089af096e473eb392bf8f455b8df460c2759fc8",h)},90413:()=>{}};