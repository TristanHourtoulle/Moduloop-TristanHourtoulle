(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{70217:function(e,t,a){Promise.resolve().then(a.bind(a,37797)),Promise.resolve().then(a.bind(a,18036))},28472:function(e,t,a){"use strict";var s=a(3827);a(64090);var r=a(20703);t.Z=()=>(0,s.jsx)("div",{className:"flex items-center justify-center my-auto",children:(0,s.jsx)(r.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},18036:function(e,t,a){"use strict";a.r(t),a.d(t,{Title:function(){return c}});var s=a(3827),r=a(20703),n=a(47907),i=a(64090);let c=e=>{let[t,a]=(0,i.useState)(e.number||""),[c,l]=(0,i.useState)(!1),[o,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(!1),m=(0,n.useRouter)();d||"/pages/projects"!==e.back||(u("/api/project"),h(!0)),(0,i.useEffect)(()=>{void 0!==e.number?a(e.number||""):null===e.number&&a("")},[e.number]);let f=async()=>{try{let a="".concat(o,"?id=").concat(e.id_project,"&name=").concat(t);if(!(await fetch(a,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");l(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},p=()=>{a(e.number||""),l(!1)};return(0,s.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{m.back()},children:(0,s.jsx)(r.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),(0,s.jsx)("h1",{className:"page-title",children:e.title}),e.canChange&&(0,s.jsxs)("div",{className:"flex gap-5",children:[c?(0,s.jsx)("input",{onChange:e=>{a(e.target.value)},type:"text",className:"title-input",value:t}):(0,s.jsx)("p",{className:"page-number",children:t}),c?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(r.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>f()}),(0,s.jsx)(r.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>p()})]}):(0,s.jsx)(r.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>l(!c)})]}),!e.canChange&&(0,s.jsx)("p",{className:"page-number",children:e.number})]})}},37797:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(3827),r=a(64090),n=a(28472);async function i(e){try{let t=JSON.parse(e),a=await fetch("/api/product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw console.log("ERROR: ",await a.text()),Error(await a.text());return await a.json(),{success:!0,message:"Data added"}}catch(e){return{success:!1,message:e.message}}}function c(){let[e,t]=(0,r.useState)(null),[a,c]=(0,r.useState)(!1),l=async t=>{if(c(!0),t.preventDefault(),e)try{let t=new FormData;t.set("file",e);let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok)throw Error(await a.text());let s=await a.json();if(!s.success)return c(!1),"KO: "+s.message;await i(s.data),c(!1),window.location.href="/pages/products"}catch(e){c(!1),console.log("ERROR: ",e),alert("ERROR: "+e)}};return a?(0,s.jsx)(n.Z,{}):(0,s.jsxs)("form",{onSubmit:l,children:[(0,s.jsx)("input",{type:"file",name:"file",onChange:e=>{var a;return t(null===(a=e.target.files)||void 0===a?void 0:a[0])}}),(0,s.jsx)("input",{type:"submit",value:"Upload"})]})}}},function(e){e.O(0,[202,971,69,744],function(){return e(e.s=70217)}),_N_E=e.O()}]);