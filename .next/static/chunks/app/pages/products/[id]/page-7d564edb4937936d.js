(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{14275:function(e,s,l){Promise.resolve().then(l.bind(l,90810))},28472:function(e,s,l){"use strict";var a=l(3827);l(64090);var c=l(20703);s.Z=()=>(0,a.jsx)("div",{className:"flex items-center justify-center my-auto",children:(0,a.jsx)(c.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},18036:function(e,s,l){"use strict";l.r(s),l.d(s,{Title:function(){return i}});var a=l(3827),c=l(20703),n=l(47907),t=l(64090);let i=e=>{let[s,l]=(0,t.useState)(e.number||""),[i,r]=(0,t.useState)(!1),[d,o]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),m=(0,n.useRouter)();u||"/pages/projects"!==e.back||(o("/api/project"),h(!0)),(0,t.useEffect)(()=>{void 0!==e.number?l(e.number||""):null===e.number&&l("")},[e.number]);let x=async()=>{try{let l="".concat(d,"?id=").concat(e.id_project,"&name=").concat(s);if(!(await fetch(l,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");r(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},j=()=>{l(e.number||""),r(!1)};return(0,a.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{m.back()},children:(0,a.jsx)(c.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),(0,a.jsx)("h1",{className:"page-title",children:e.title}),e.canChange&&(0,a.jsxs)("div",{className:"flex gap-5",children:[i?(0,a.jsx)("input",{onChange:e=>{l(e.target.value)},type:"text",className:"title-input",value:s}):(0,a.jsx)("p",{className:"page-number",children:s}),i?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(c.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>x()}),(0,a.jsx)(c.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>j()})]}):(0,a.jsx)(c.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>r(!i)})]}),!e.canChange&&(0,a.jsx)("p",{className:"page-number",children:e.number})]})}},90810:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return o}});var a=l(3827),c=l(28472),n=l(18036),t=l(64090),i=e=>{let{product:s,type:l}=e;return(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{})," ",["Fabrication","Transport et Installation","Utilisation","Fin de vie"].map((e,s)=>(0,a.jsx)("th",{className:"cell index-color index-line",children:e},s))]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cell index-color index-col",children:"R\xe9chauffement Climatique"}),"new"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.new.rc.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.new.rc.installation}),(0,a.jsx)("td",{className:"cell",children:s.new.rc.usage}),(0,a.jsx)("td",{className:"cell",children:s.new.rc.endOfLife})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.reuse.rc.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.reuse.rc.installation}),(0,a.jsx)("td",{className:"cell",children:s.reuse.rc.usage}),(0,a.jsx)("td",{className:"cell",children:s.reuse.rc.endOfLife})]})]},s.id),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cell index-color index-col",children:"Epuisement des ressources fossiles"}),"new"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.new.erf.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.new.erf.installation}),(0,a.jsx)("td",{className:"cell",children:s.new.erf.usage}),(0,a.jsx)("td",{className:"cell",children:s.new.erf.endOfLife})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.reuse.erf.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.reuse.erf.installation}),(0,a.jsx)("td",{className:"cell",children:s.reuse.erf.usage}),(0,a.jsx)("td",{className:"cell",children:s.reuse.erf.endOfLife})]})]},s.id),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cell index-color index-col",children:"Acidifications des sols et eaux"}),"new"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.new.ase.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.new.ase.installation}),(0,a.jsx)("td",{className:"cell",children:s.new.ase.usage}),(0,a.jsx)("td",{className:"cell",children:s.new.ase.endOfLife})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.reuse.ase.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.reuse.ase.installation}),(0,a.jsx)("td",{className:"cell",children:s.reuse.ase.usage}),(0,a.jsx)("td",{className:"cell",children:s.reuse.ase.endOfLife})]})]},s.id),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cell index-color index-col",children:"Eutrophisation marine"}),"new"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.new.em.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.new.em.installation}),(0,a.jsx)("td",{className:"cell",children:s.new.em.usage}),(0,a.jsx)("td",{className:"cell",children:s.new.em.endOfLife})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"cell",children:s.reuse.em.manufacturing}),(0,a.jsx)("td",{className:"cell",children:s.reuse.em.installation}),(0,a.jsx)("td",{className:"cell",children:s.reuse.em.usage}),(0,a.jsx)("td",{className:"cell",children:s.reuse.em.endOfLife})]})]},s.id)]})]})},r=e=>(0,a.jsx)("div",{children:(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cell index-line index-color",children:"Nom"}),(0,a.jsx)("th",{className:"cell index-line index-color",children:"Unit\xe9"}),(0,a.jsx)("th",{className:"cell index-line index-color",children:"Base"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"cell",children:e.name}),(0,a.jsx)("td",{className:"cell",children:e.unit}),(0,a.jsx)("td",{className:"cell",children:e.base})]})})]})}),d=l(20703);function o(e){var s,l;let{params:{id:o}}=e,[u,h]=(0,t.useState)(!0),[m,x]=(0,t.useState)(null),[j,f]=(0,t.useState)(null),[N,g]=(0,t.useState)("new"),[p,v]=(0,t.useState)(null),[w,b]=(0,t.useState)(!0),C=async e=>{e.preventDefault();try{h(!0);let e=new FormData;if(e.append("file",p),e.append("productId",null==m?void 0:m.id),(await fetch("/api/upload/image/product",{method:"POST",body:e})).ok){let e=await fetch("/api/product?id=".concat(encodeURIComponent(o)),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let s=await e.json();x(s.product)}}else alert("Failed to upload image.")}catch(e){alert(e)}finally{h(!1)}};return(0,t.useEffect)(()=>{(async()=>{b(!0);try{let e=await fetch("/api/product?id=".concat(encodeURIComponent(o)),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let s=await e.json();if(x(s.product),s.product){let e={title:"Votre produit: ",image:"/icons/close.svg",number:s.product.name,back:"/pages/products",canChange:!1};f(e)}}}catch(e){alert(e)}finally{b(!1)}})()},[o]),(0,a.jsx)("div",{className:"",children:w?(0,a.jsx)("div",{children:(0,a.jsx)(c.Z,{})}):m?(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex items-center mb-10",children:[(0,a.jsx)("div",{className:"mr-auto",children:(0,a.jsx)(n.Title,{...j})}),(0,a.jsx)("button",{type:"button",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 download-button ",children:[(0,a.jsx)(d.default,{src:"/icons/telecharger.svg",alt:"download",height:30,width:30}),(0,a.jsx)("p",{children:"T\xe9l\xe9charger"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mr-auto",children:[""!=m.image&&m.image?(0,a.jsx)(d.default,{src:null!==(s=m.image)&&void 0!==s?s:"",alt:null!==(l=m.name)&&void 0!==l?l:"",width:450,height:450,className:"object-contain"}):(0,a.jsx)(d.default,{src:"/icons/no-image.png",alt:"",width:450,height:450,className:"object-contain"}),(0,a.jsxs)("form",{onSubmit:C,children:[(0,a.jsx)("input",{type:"file",name:"file",onChange:e=>{var s;return v(null===(s=e.target.files)||void 0===s?void 0:s[0])}}),(0,a.jsx)("input",{type:"hidden",name:"productId",value:o}),(0,a.jsx)("input",{type:"submit",value:"Changer",className:"open-button"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-10 mr-20",children:[(0,a.jsx)(r,{...m}),(0,a.jsxs)("div",{className:"flex items-center gap-10",children:[(0,a.jsx)("button",{className:"new"===N?"inter-nav-bar":"inter-nav-bar-selected",onClick:()=>g("new"),children:"Neuf"}),(0,a.jsx)("button",{className:"reuse"===N?"inter-nav-bar":"inter-nav-bar-selected",onClick:()=>g("reuse"),children:"Reuse"})]}),(0,a.jsx)(i,{product:m,type:N})]})]})]}):(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:"Produit introuvable"})})})}}},function(e){e.O(0,[202,971,69,744],function(){return e(e.s=14275)}),_N_E=e.O()}]);