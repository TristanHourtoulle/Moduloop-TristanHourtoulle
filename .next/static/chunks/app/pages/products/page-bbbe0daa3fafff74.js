(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{35017:function(e,t,s){Promise.resolve().then(s.bind(s,10248))},28472:function(e,t,s){"use strict";var a=s(3827);s(64090);var c=s(20703);t.Z=()=>(0,a.jsx)("div",{className:"flex items-center justify-center my-auto",children:(0,a.jsx)(c.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},18036:function(e,t,s){"use strict";s.r(t),s.d(t,{Title:function(){return n}});var a=s(3827),c=s(20703),r=s(47907),i=s(64090);let n=e=>{let[t,s]=(0,i.useState)(e.number||""),[n,l]=(0,i.useState)(!1),[d,o]=(0,i.useState)(""),[u,f]=(0,i.useState)(!1),h=(0,r.useRouter)();u||"/pages/projects"!==e.back||(o("/api/project"),f(!0)),(0,i.useEffect)(()=>{void 0!==e.number?s(e.number||""):null===e.number&&s("")},[e.number]);let m=async()=>{try{let s="".concat(d,"?id=").concat(e.id_project,"&name=").concat(t);if(!(await fetch(s,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");l(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},p=()=>{s(e.number||""),l(!1)};return(0,a.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{h.back()},children:(0,a.jsx)(c.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),(0,a.jsx)("h1",{className:"page-title",children:e.title}),e.canChange&&(0,a.jsxs)("div",{className:"flex gap-5",children:[n?(0,a.jsx)("input",{onChange:e=>{s(e.target.value)},type:"text",className:"title-input",value:t}):(0,a.jsx)("p",{className:"page-number",children:t}),n?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(c.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>m()}),(0,a.jsx)(c.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>p()})]}):(0,a.jsx)(c.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>l(!n)})]}),!e.canChange&&(0,a.jsx)("p",{className:"page-number",children:e.number})]})}},62471:function(e,t,s){"use strict";var a=s(3827);s(64090);var c=s(20703);t.Z=e=>{let{size:t}=e;return(0,a.jsx)("div",{className:"delete-btn flex cursor-pointer",children:(0,a.jsx)(c.default,{src:"/icons/trash-can.svg",alt:"Supprimer le produit du projet",width:t||25,height:t||25})})}},57224:function(e,t,s){"use strict";s.d(t,{Gg:function(){return r},kS:function(){return c}}),s(15355);var a=s(13472);(0,a.$)("a089af096e473eb392bf8f455b8df460c2759fc8"),(0,a.$)("edc9d95c9d80edb936c64090b673fa63c7fdb0c3"),(0,a.$)("78b55bdabf88dcd5be651d7a1d785fc3ec43e204"),(0,a.$)("7d54574caa5baa2b96b25e4c0991e44adb146ad5");var c=(0,a.$)("b17d8f6613e66b3cb3357cbd972b101329bd0326"),r=(0,a.$)("36bc73ad38d694c579e3598bd450a2a6029f558c")},10248:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(3827),c=s(28472),r=s(18036),i=s(62471),n=s(20703),l=s(8792),d=e=>{var t;let{id:s,name:c,image:r,base:d,onDeleteSuccess:o}=e,u=null==c?void 0:c.replace("Inies - ",""),f=null==d?void 0:null===(t=d.toLowerCase())||void 0===t?void 0:t.replace(/^\w/,e=>e.toUpperCase()),h=async()=>{(await fetch("/api/product?id=".concat(s),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?o():alert("Product not deleted")};return(0,a.jsxs)("div",{className:"product-card w-[30%] px-[2%] py-[2%] flex flex-col justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h2",{className:"name",children:u}),(0,a.jsx)("p",{className:"base",children:f})]}),(0,a.jsx)("div",{onClick:h,children:(0,a.jsx)(i.Z,{size:23})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(n.default,{src:r||"/icons/no-image.png",alt:u||"",width:150,height:150})}),(0,a.jsx)("div",{className:"flex items-center gap-3 justify-center link-cta ml-auto mr-auto",children:(0,a.jsxs)(l.default,{href:"/pages/products/"+s,className:"flex items-center gap-15 bg-white border-10",children:[(0,a.jsx)(n.default,{src:"/icons/link.svg",alt:"Ouvrir",width:27,height:27,className:"object-contain"}),(0,a.jsx)("p",{children:"Ouvrir"})]})})]})},o=s(57224),u=s(64090);function f(){let[e,t]=(0,u.useState)(null),[s,i]=(0,u.useState)([]),[f,h]=(0,u.useState)(!0);(0,u.useEffect)(()=>{(async()=>{let e=await (0,o.Gg)();if(e&&!e.user.name.includes("undefined")&&"admin"===e.user.role){t(e),m();return}window.location.href="/"})()},[]);let m=async()=>{h(!0);let e=await fetch("/api/product/list",{method:"GET"}),t=await e.json();t.success?i(t.data):console.error("Failed to fetch products:",t.error),h(!1)},p={title:"Vos produits",image:"/icons/entrepot.svg",number:s.length.toString(),back:"#",canChange:!1,id_project:0};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-10",children:[(0,a.jsx)("div",{className:"mr-auto",children:(0,a.jsx)(r.Title,{...p})}),(0,a.jsx)(l.default,{href:"/pages/products/add",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mr-5 handle-product-button",children:[(0,a.jsx)(n.default,{src:"/icons/reglages.svg",alt:"Add Product",width:30,height:30,className:"object-contain handle-product-image"}),(0,a.jsx)("p",{className:"handle-product-text",children:"G\xe9rer"})]})})]}),f?(0,a.jsx)(c.Z,{}):(0,a.jsx)("div",{className:"ml-[3%]",children:(0,a.jsx)("div",{className:"products-section my-[2%] mx-[5%]",style:{display:"flex",flexWrap:"wrap",flexDirection:"row",gap:"25px",justifyContent:"space-between"},children:s?s.map((e,t)=>(0,a.jsx)(d,{...e,onDeleteSuccess:m},t)):(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("p",{className:"no-product-text",children:"Oh, c'est bien vide par ici..."})})})})]})}},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return c.a}});var a=s(25250),c=s.n(a)},13472:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return c}});let a=s(15355);function c(e){let{createServerReference:t}=s(97355);return t(e,a.callServer)}}},function(e){e.O(0,[202,250,971,69,744],function(){return e(e.s=35017)}),_N_E=e.O()}]);