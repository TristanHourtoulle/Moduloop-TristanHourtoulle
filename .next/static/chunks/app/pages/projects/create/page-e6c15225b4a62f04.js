(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{20596:function(e,t,r){Promise.resolve().then(r.bind(r,39551))},18036:function(e,t,r){"use strict";r.r(t),r.d(t,{Title:function(){return s}});var a=r(3827),o=r(20703),n=r(47907),l=r(64090);let s=e=>{let[t,r]=(0,l.useState)(e.number||""),[s,c]=(0,l.useState)(!1),[i,u]=(0,l.useState)(""),[d,p]=(0,l.useState)(!1),g=(0,n.useRouter)();d||"/pages/projects"!==e.back||(u("/api/project"),p(!0)),(0,l.useEffect)(()=>{void 0!==e.number?r(e.number||""):null===e.number&&r("")},[e.number]);let m=async()=>{try{let r="".concat(i,"?id=").concat(e.id_project,"&name=").concat(t);if(!(await fetch(r,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");c(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},h=()=>{r(e.number||""),c(!1)};return(0,a.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{g.back()},children:(0,a.jsx)(o.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),(0,a.jsx)("h1",{className:"page-title",children:e.title}),e.canChange&&(0,a.jsxs)("div",{className:"flex gap-5",children:[s?(0,a.jsx)("input",{onChange:e=>{r(e.target.value)},type:"text",className:"title-input",value:t}):(0,a.jsx)("p",{className:"page-number",children:t}),s?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>m()}),(0,a.jsx)(o.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>h()})]}):(0,a.jsx)(o.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>c(!s)})]}),!e.canChange&&(0,a.jsx)("p",{className:"page-number",children:e.number})]})}},39551:function(e,t,r){"use strict";r.r(t);var a=r(3827),o=r(18036),n=r(91402),l=r(64090);t.default=function(){let[e,t]=(0,l.useState)(""),[r,s]=(0,l.useState)([]),[c,i]=(0,l.useState)(""),[u,d]=(0,l.useState)(""),[p,g]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{let e=await fetch("/api/session",{method:"GET"}),r=await e.json();r.success?await t(r.session.user.id):console.error("Failed to fetch user:",r.error)})()},[]),(0,l.useEffect)(()=>{(async()=>{if(e){let t=await fetch("/api/group/list?id=".concat(encodeURIComponent(e)),{method:"GET"}),r=await t.json();r.success?s((0,n.yR)(r.data)):console.error("Failed to fetch groups:",r.error)}})()},[e]);let[m,h]=(0,l.useState)(!1),f=async()=>{try{let t=document.getElementById("name-createProject"),r=document.getElementById("group-createProject");if(t.value){if(t.value.length<=4||t.value.length>=49){alert("Le nom du projet doit contenir entre 5 et 50 caract\xe8res.");return}}else{alert("Veuillez renseigner le nom du projet.");return}if(console.log("nameProject",t.value),console.log("groupId",r.value),"-10"===r.value)console.log("Ne pas reli\xe9 \xe0 un groupe");else{console.log("Reli\xe9 \xe0 un groupe");let a=new FormData;if(a.append("user_id",e),a.append("name",t.value),a.append("description",""),a.append("company",""),a.append("location",""),a.append("area",""),a.append("budget",""),a.append("group",r.value),m){let e=document.getElementById("group-NewGroup");a.append("group-name",e.value),a.append("group-description",""),a.append("group-budget","")}(await fetch("/api/project",{method:"POST",body:a})).ok?window.location.href="/pages/projects":alert("Failed to create project.")}}catch(e){console.error("Failed to create project:",e)}finally{}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Title,{title:"Votre nouveau projet",image:"/icons/close.svg",number:"",back:"/pages/projects",canChange:!1}),(0,a.jsxs)("div",{className:"mt-[3%] flex flex-col gap-5 px-8 py-4 bg-white items-center justify-center w-[50%] rounded-[16px] ml-auto mr-auto",children:[(0,a.jsxs)("div",{className:"w-[100%]",children:[(0,a.jsx)("label",{htmlFor:"name-createProject",className:"block mb-2 text-sm font-bold text-gray-900",children:"Nom"}),(0,a.jsx)("input",{style:{width:"100%"},id:"name-createProject",type:"text",placeholder:"Quel est le nom de votre projet ?",className:"text-left bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 "})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-[100%]",children:[(0,a.jsxs)("div",{className:"w-[100%]",children:[(0,a.jsx)("label",{htmlFor:"group-createProject",className:"block mb-2 text-sm font-bold text-gray-900",children:"Voulez-vous reli\xe9 ce projet \xe0 un groupe ?"}),(0,a.jsxs)("select",{onChange:e=>{h("-2"===e.target.value)},id:"group-createProject",className:"bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",children:[(0,a.jsx)("option",{className:"",value:-1,children:"Aucun Groupe"}),Array.isArray(r)&&r.map(e=>(0,a.jsx)("option",{value:e.id||-10,children:e.name},e.id)),(0,a.jsx)("option",{value:"-2",children:"Cr\xe9er un nouveau groupe"})]})]}),m&&(0,a.jsxs)("div",{className:" flex flex-col gap-1",children:[(0,a.jsx)("label",{hidden:!0,htmlFor:"group-NewGroup",className:"form-label",children:"Nom du Groupe"}),(0,a.jsx)("input",{style:{width:"100%"},id:"group-NewGroup",type:"text",placeholder:"Quel est le nom de votre nouveau groupe ?",className:"text-left bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 "})]})]}),(0,a.jsx)("div",{onClick:f,className:"py-2 px-4 border-2 border-[#30C1BD] rounded-[8px] bg-primary-transparent cursor-pointer transition-all duration-250 hover:opacity-50",children:(0,a.jsx)("p",{className:"text-lg font-bold text-[#30C1BD]",children:"Cr\xe9er"})})]})]})}},91402:function(e,t,r){"use strict";function a(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,user_id:e[a].user_id};t.push(r)}return t[0]}function o(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,user_id:e[a].user_id};t.push(r)}return t}function n(e){let t=[],r=Array.from(e);for(let a=0;a<r.length;a++){let r={id:e[a].id,name:e[a].name,description:e[a].description,image:e[a].image,budget:e[a].budget,products:e[a].products,company:e[a].company,location:e[a].location,area:e[a].area,user_id:e[a].user_id,group:e[a].group_id,created_at:e[a].created_at,updated_at:e[a].updated_at};t.push(r)}return t}function l(e){return{id:e.id,name:e.name,description:e.description,image:e.image,budget:e.budget,products:e.products,company:e.company,location:e.location,area:e.area,user_id:e.user_id,group:e.group_id,created_at:e.created_at,updated_at:e.updated_at,groupInfo:null}}r.d(t,{Db:function(){return a},O:function(){return n},Sy:function(){return l},yR:function(){return o}})}},function(e){e.O(0,[202,971,69,744],function(){return e(e.s=20596)}),_N_E=e.O()}]);