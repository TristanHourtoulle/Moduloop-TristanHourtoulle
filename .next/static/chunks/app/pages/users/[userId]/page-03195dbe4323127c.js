(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{81693:function(e,t,s){Promise.resolve().then(s.bind(s,32480))},28472:function(e,t,s){"use strict";var a=s(3827);s(64090);var r=s(20703);t.Z=()=>(0,a.jsx)("div",{className:"flex items-center justify-center my-auto",children:(0,a.jsx)(r.default,{src:"/icons/logoImage.svg",alt:"Loader",width:50,height:50,className:"loader"})})},18036:function(e,t,s){"use strict";s.r(t),s.d(t,{Title:function(){return c}});var a=s(3827),r=s(20703),l=s(47907),i=s(64090);let c=e=>{let[t,s]=(0,i.useState)(e.number||""),[c,n]=(0,i.useState)(!1),[d,o]=(0,i.useState)(""),[u,m]=(0,i.useState)(!1),x=(0,l.useRouter)();u||"/pages/projects"!==e.back||(o("/api/project"),m(!0)),(0,i.useEffect)(()=>{void 0!==e.number?s(e.number||""):null===e.number&&s("")},[e.number]);let h=async()=>{try{let s="".concat(d,"?id=").concat(e.id_project,"&name=").concat(t);if(!(await fetch(s,{method:"PUT"})).ok)throw alert("ERROR"),Error("Erreur lors de la modification du titre");n(!1)}catch(e){console.error(e),alert("Erreur lors de la modification du titre")}},p=()=>{s(e.number||""),n(!1)};return(0,a.jsxs)("div",{className:"flex ml-5 gap-5 items-center",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{x.back()},children:(0,a.jsx)(r.default,{src:e.image,alt:"Page Logo",width:50,height:50,className:"object-contain title-image"})}),(0,a.jsx)("h1",{className:"page-title",children:e.title}),e.canChange&&(0,a.jsxs)("div",{className:"flex gap-5",children:[c?(0,a.jsx)("input",{onChange:e=>{s(e.target.value)},type:"text",className:"title-input",value:t}):(0,a.jsx)("p",{className:"page-number",children:t}),c?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(r.default,{src:"/icons/valid\xe9.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>h()}),(0,a.jsx)(r.default,{src:"/icons/close.svg",alt:"Cancel",width:50,height:50,className:"cursor-pointer",onClick:()=>p()})]}):(0,a.jsx)(r.default,{src:"/icons/Edit.svg",alt:"Change",width:50,height:50,className:"cursor-pointer",onClick:()=>n(!c)})]}),!e.canChange&&(0,a.jsx)("p",{className:"page-number",children:e.number})]})}},57224:function(e,t,s){"use strict";s.d(t,{Gg:function(){return l},kS:function(){return r}}),s(15355);var a=s(13472);(0,a.$)("a089af096e473eb392bf8f455b8df460c2759fc8"),(0,a.$)("edc9d95c9d80edb936c64090b673fa63c7fdb0c3"),(0,a.$)("78b55bdabf88dcd5be651d7a1d785fc3ec43e204"),(0,a.$)("7d54574caa5baa2b96b25e4c0991e44adb146ad5");var r=(0,a.$)("b17d8f6613e66b3cb3357cbd972b101329bd0326"),l=(0,a.$)("36bc73ad38d694c579e3598bd450a2a6029f558c")},32480:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(3827),r=s(28472),l=s(18036),i=s(57224),c=s(87461);/**
 * @license lucide-react v0.337.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,c.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),d=(0,c.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),o=(0,c.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,c.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var m=s(8792),x=s(64090),h=s(56288);function p(e){let{params:{userId:t}}=e,[s,c]=(0,x.useState)(null),[p,g]=(0,x.useState)(null),[f,j]=(0,x.useState)(null),[y,b]=(0,x.useState)(!1),[v,N]=(0,x.useState)("infos"),[w,k]=(0,x.useState)(!1),[C,E]=(0,x.useState)("auto"),[S,M]=(0,x.useState)(null),[A,T]=(0,x.useState)(!1),[_,L]=(0,x.useState)("user"),[R,Z]=(0,x.useState)(!1);(0,x.useEffect)(()=>{let e=async()=>{b(!0);try{let e=await fetch("/api/project/list?id=".concat(t),{method:"GET"}),s=await e.json();s.success?M(s.data):console.error("Erreur lors de la r\xe9cup\xe9ration des projets de l'utilisateur:",s.error)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des projets de l'utilisateur:",e)}finally{b(!1)}},s=async()=>{b(!0);try{let e=await fetch("/api/user/admin?id=".concat(encodeURIComponent(t)),{method:"GET"}),s=await e.json();s.success?(c(s.data),L(s.data.role),j({title:"Utilisateur",image:"/icons/close.svg",number:s.data.name+" "+s.data.firstName||"",back:"/pages/users",canChange:!1,id_project:void 0})):console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",s.error)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",e)}finally{b(!1)}};(async()=>{let t=await (0,i.Gg)();if(t&&!t.user.name.includes("undefined")&&"admin"===t.user.role){g(t),await s(),await e();return}window.location.href="/"})()},[]);let $=e=>new Date(e).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),D=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/864e5),r=Math.floor(s%864e5/36e5),l=Math.floor(s%36e5/6e4);return a>0?a+" jours":r>0?r+" heures":l>0?l+" minutes":Math.floor(s%6e4/1e3)+" secondes"},O=async e=>{try{await navigator.clipboard.writeText(e),k(!0),E("auto"),setTimeout(()=>{k(!1)},2e3)}catch(e){console.error("Erreur lors de la copie dans le presse-papiers : ",e)}};if(y||!s||!f||!S)return(0,a.jsx)(r.Z,{});let P=async e=>{s&&e!==s.role?Z(!0):R&&Z(!1)},q=async()=>{if(s&&R){alert("Je dois modifier le r\xf4le de l'utilisateur dans la base de donn\xe9es...");let e={...s,role:_,updatedAt:"",createdAt:""};try{let t=await fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();s.success?(alert("Le r\xf4le de l'utilisateur a \xe9t\xe9 modifi\xe9 avec succ\xe8s !"),Z(!1),h.toast.success("Le r\xf4le de l'utilisateur a \xe9t\xe9 modifi\xe9 avec succ\xe8s !")):(console.error("Erreur lors de la modification du r\xf4le de l'utilisateur:",s.error),h.toast.error("Erreur 1 lors de la modification du r\xf4le de l'utilisateur"))}catch(e){console.error("Erreur lors de la modification du r\xf4le de l'utilisateur:",e),h.toast.error("Erreur 2 lors de la modification du r\xf4le de l'utilisateur")}}};return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(l.Title,{...f}),(0,a.jsx)("div",{className:"py-[3%] px-7 flex flex-col items-center",children:"infos"===v&&(0,a.jsxs)("div",{className:"flex flex-col w-[75%]",children:[(0,a.jsx)("div",{className:"px-4 sm:px-0",children:(0,a.jsx)("h3",{className:"text-2xl align-left font-semibold leading-7 text-gray-900",children:"Informations"})}),(0,a.jsx)("div",{className:"mt-6 border-t border-gray-300",children:(0,a.jsxs)("dl",{className:"divide-y divide-gray-300",children:[(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"R\xf4le"}),(0,a.jsx)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,a.jsxs)("select",{onChange:()=>{let e=document.getElementById("role");L(e.value),P(e.value)},id:"role",className:"bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-[50%] p-2.5 ",children:[(0,a.jsx)("option",{value:"admin",selected:"admin"===s.role,children:"Administrateur"}),(0,a.jsx)("option",{value:"user",selected:"admin"!==s.role,children:"Utilisateur"})]}),(0,a.jsx)("div",{hidden:!R,onClick:q,className:"cursor-pointer border-2 border-[#30C1BD] bg-white text-[#30C1BD] rounded-md px-4 py-2 hover:bg-[#30C1BD] hover:text-white transition-all ease-in-out delay-50",children:"Confirmer"})]})})]}),(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Nom & Pr\xe9nom"}),(0,a.jsx)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:s.name+" "+s.firstName})]}),(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Adresse Mail"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0 transition-all duration-100 ease-in-out overflow-hidden hover:opacity-75",style:{height:C},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{O(s.email||"")},children:[s.email||"",(0,a.jsx)(n,{className:"transition-rotate duration-300 rotate-0 hover:rotate-[8deg]"})]}),w&&(0,a.jsx)("p",{className:"mt-2 text-sm font-semibold text-[#30c1bd]",children:"Texte copi\xe9 avec succ\xe8s !"})]})]}),(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Membre depuis"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:[$(s.updatedAt||"")," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",D(s.updatedAt||""),")"]})]})]}),(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Derni\xe8res Activit\xe9s"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",children:[S&&S[0]?$(S[0].updated_at||""):"N\xe9ant"," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",S&&S[0]?D(S[0].updated_at||""):"N\xe9ant",")"]})]})]}),(0,a.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,a.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-500",children:"Projets"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg leading-6 text-gray-900 sm-col-span-2 sm:mt-0",onClick:()=>{T(!A)},children:[(0,a.jsxs)(m.default,{href:"#",className:"flex items-center gap-4 w-fit bg-white text-[#30c1bd] border-2 border-[#30c1bd] rounded-md px-4 py-2 hover:bg-[#30c1bd] hover:text-white transition-all ease-in-out delay-50",children:[A?(0,a.jsx)(d,{}):(0,a.jsx)(o,{}),A?(0,a.jsx)("span",{children:"Masquer les projets"}):(0,a.jsx)("span",{children:"Voir les projets"})]}),(0,a.jsx)("div",{className:"flex flex-col items-start w-[250%] mt-5",children:A&&S.length>0?S.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-12 border-t-2 py-4 border-gray-300",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("p",{className:"text-lg font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-lg",children:["Derni\xe8re modification:"," ",$(e.updated_at||"")," ",(0,a.jsx)("span",{children:D(e.updated_at||"")})]})]}),(0,a.jsx)("div",{className:"flex flex-col items-center bg-white border-2 border-black px-4 py-2 rounded-[8px]",children:(0,a.jsxs)(m.default,{href:"/pages/projects/".concat(e.id),className:"flex items-center justify-center gap-3 w-fit",children:[(0,a.jsx)(u,{}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:"Ouvrir"})]})})]}))||(0,a.jsx)("div",{className:"mt-",children:"Il n'y a pas de projets"}):A?(0,a.jsx)("p",{children:"L'utilisateur n'a pas encore cr\xe9\xe9 de projets..."}):null})]})]})]})})]})})]})}},87461:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(64090),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.337.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:c="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:u="",children:m,...x}=s;return(0,a.createElement)("svg",{ref:i,...r,width:n,height:n,stroke:c,strokeWidth:o?24*Number(d)/Number(n):d,className:["lucide","lucide-".concat(l(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(25250),r=s.n(a)},13472:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let a=s(15355);function r(e){let{createServerReference:t}=s(97355);return t(e,a.callServer)}}},function(e){e.O(0,[202,250,288,971,69,744],function(){return e(e.s=81693)}),_N_E=e.O()}]);